@startuml
!theme plain

entity User {
  + id: UUID <<PK>>
  --
  first_name: string
  last_name: string
  email: string
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

entity Member {
  + id: UUID <<PK>>
  --
  fk_user_id: UUID <<FK>>
  initials: string ' e.g., 'JD'
  full_name: string ' derived from user
  email: string ' same as user email
  avatar_url: string
  bio: text
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

entity Board {
  + id: UUID <<PK>>
  --
  fk_member_id: UUID <<FK>> ' Owner of the board
  name: string
  description: string
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

entity List {
  + id: UUID <<PK>>
  --
  fk_board_id: UUID <<FK>>
  name: string
  position: integer
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

entity Card {
  + id: UUID <<PK>>
  --
  fk_list_id: UUID <<FK>>
  name: string
  description: text
  position: integer
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

entity Label {
  + id: UUID <<PK>>
  --
  fk_board_id: UUID <<FK>>
  name: string
  color: string
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

' Pivot Table for Many-to-Many Card-Label relationship
entity card_label {
  + fk_card_id: UUID <<FK>>
  + fk_label_id: UUID <<FK>>
  --
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

' Pivot Table for Many-to-Many Board-Member sharing relationship (who has access to the board)
entity board_member {
  + fk_board_id: UUID <<FK>>
  + fk_member_id: UUID <<FK>>
  --
  created_at: datetime
  updated_at: datetime
  deleted_at: datetime
}

' Relationships
User ||--|{ Member : has one profile
Member ||--o{ Board : owns (member profile owns board)
Member ||--o{ board_member : is shared with (member profile is shared)

Board ||--o{ List : has many
List ||--o{ Card : has many
Board ||--o{ Label : has many

Card ||--o{ card_label : has many
Label ||--o{ card_label : has many
Board ||--o{ board_member : is shared with

@enduml
